---
const navItems = [
  { name: 'home', path: '/', cmd: 'cd ~' },
  { name: 'about', path: '/about', cmd: 'cat about.txt' },
  { name: 'skills', path: '/skills', cmd: 'ls skills/' },
  { name: 'projects', path: '/projects', cmd: 'ls -la projects/' },
  { name: 'experience', path: '/experience', cmd: 'history' },
  { name: 'blog', path: '/blog', cmd: 'tail -f blog/' },
  { name: 'contact', path: '/contact', cmd: './contact.sh' },
];

const currentPath = Astro.url.pathname;
---

<header class="sticky top-0 z-50 bg-bg-primary/95 backdrop-blur border-b border-terminal-border" data-tour-id="header-nav">
  <nav class="container mx-auto px-4 max-w-5xl">
    <div class="flex items-center justify-between h-14">
      <!-- Logo -->
      <a href="/" class="text-terminal-green font-bold text-lg hover:glow-sm transition-all">
        <span class="text-terminal-cyan">~/</span>ade
      </a>

      <!-- Desktop Navigation -->
      <ul class="hidden md:flex items-center gap-1">
        <!-- Tour Restart Button -->
        <li>
          <button
            id="restart-tour"
            class="px-2 py-2 text-sm text-terminal-muted hover:text-terminal-green hover:bg-bg-secondary rounded transition-all"
            title="Restart tour"
            aria-label="Restart guided tour"
          >
            [?]
          </button>
        </li>
        {navItems.map((item) => (
          <li>
            <a
              href={item.path}
              class={`px-3 py-2 text-sm rounded transition-all hover:bg-bg-secondary group ${
                currentPath === item.path
                  ? 'text-terminal-green bg-bg-secondary'
                  : 'text-terminal-muted hover:text-terminal-green'
              }`}
            >
              <span class="text-terminal-cyan opacity-0 group-hover:opacity-100 transition-opacity">$</span>
              {item.name}
            </a>
          </li>
        ))}
      </ul>

      <!-- Mobile Menu Button -->
      <button
        id="mobile-menu-btn"
        class="md:hidden p-2 text-terminal-green hover:bg-bg-secondary rounded"
        aria-label="Toggle menu"
      >
        <span class="block w-5 h-0.5 bg-current mb-1"></span>
        <span class="block w-5 h-0.5 bg-current mb-1"></span>
        <span class="block w-5 h-0.5 bg-current"></span>
      </button>
    </div>

    <!-- Mobile Navigation -->
    <div id="mobile-menu" class="hidden md:hidden pb-4">
      <ul class="space-y-1">
        {navItems.map((item) => (
          <li>
            <a
              href={item.path}
              class={`block px-3 py-2 text-sm rounded transition-all ${
                currentPath === item.path
                  ? 'text-terminal-green bg-bg-secondary'
                  : 'text-terminal-muted hover:text-terminal-green hover:bg-bg-secondary'
              }`}
            >
              <span class="text-terminal-cyan">$</span> {item.cmd}
            </a>
          </li>
        ))}
      </ul>
    </div>
  </nav>
</header>

<script>
  const menuBtn = document.getElementById('mobile-menu-btn');
  const mobileMenu = document.getElementById('mobile-menu');

  menuBtn?.addEventListener('click', () => {
    mobileMenu?.classList.toggle('hidden');
  });
</script>
